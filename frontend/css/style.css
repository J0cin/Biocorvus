/* --- VARIABLES Y ESTILOS GLOBALES --- */
:root {
    --font-family: "Zalando Sans Expanded", sans-serif;
    --color-background-start: #020211;
    --color-background-end: #19183B;
    --color-text-primary: #E7F2EF;
    --color-text-secondary: #A1C2BD;
    --color-border: rgba(161, 194, 189, 0.2);
    --hamburger-bar-color: #E7F2EF;
    --animation-timing: 200ms ease-in-out;
}

* { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
}

body {
    font-family: var(--font-family);
    background: linear-gradient(to bottom, var(--color-background-start), var(--color-background-end));
    color: var(--color-text-primary);
    height: 100vh; 
    width: 100vw; 
    overflow: hidden;
}

/* --- LAYOUT Y ANIMACIÓN DEL SIDEBAR --- */
#app-layout { 
    display: flex; 
    height: 100vh; 
}

#app-sidebar {
    width: 280px; 
    height: 100%; 
    padding: 20px; 
    box-sizing: border-box;
    flex-shrink: 0; 
    background: rgba(10, 10, 30, 0.8);
    backdrop-filter: blur(10px); 
    border-right: 1px solid var(--color-border);
    transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
    z-index: 1001; 
    position: fixed;
}
#app-layout.sidebar-collapsed #app-sidebar {
    transform: translateX(-100%);
}

/* Cuando el sidebar está abierto, empuja el contenido principal (desktop) */
#app-layout:not(.sidebar-collapsed) #main-content-wrapper {
    margin-left: 280px; /* ancho del sidebar */
}

#main-content-wrapper {
    flex-grow: 1; 
    height: 100vh;
    width: 100%;
    overflow: hidden; /* El scroll lo maneja #app-content */
    transition: margin-left 0.45s cubic-bezier(0.23, 1, 0.32, 1);
}

#app-content { 
    height: 100%; 
    overflow-y: auto; 
    scroll-behavior: smooth; 
}

/* SOLUCIÓN: Hamburguesa siempre visible */
#app-header {
    position: fixed;
    top: 25px;
    left: 25px;
    z-index: 1002; /* El z-index más alto para estar encima de todo */
}
.hamburger-menu { 
    display: flex; 
    flex-direction: column; 
    gap: 5px; 
    width: max-content; 
    cursor: pointer; 
}
.hamburger-menu::before, .hamburger-menu::after, .hamburger-menu input { 
    content: ""; width: 24px; height: 3px; 
    background-color: var(--hamburger-bar-color); border-radius: 999px; 
    transform-origin: left center; transition: all var(--animation-timing); 
}
.hamburger-menu input { appearance: none; padding: 0; margin: 0; outline: none; pointer-events: none; }
.hamburger-menu.is-active input { opacity: 0; width: 0; }
.hamburger-menu.is-active::before { transform: rotate(45deg) translate(2px, -3px); }
.hamburger-menu.is-active::after { transform: rotate(-45deg) translate(2px, 3px); }


/* --- MENÚ LATERAL --- */
.sidebar-header {
    padding: 10px 15px;
    margin-bottom: 30px;
}
.sidebar-header h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 700;
}
.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.nav-link {
    padding: 10px 15px;
    border-radius: 6px;
    text-decoration: none;
    color: var(--color-text-secondary);
    font-weight: 200;
    font-size: 1rem;
    transition: all 0.2s ease-in-out;
}
.nav-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--color-text-primary);
}

/* --- ESCENA DE FONDO FIJA --- */
#hero-background {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100vh;
    z-index: 1; 
    pointer-events: none;
}

/* SOLUCIÓN: Estrellas visibles con su propio z-index */
.stars {
    position: absolute; top: 0; left: 0; width: 1px; height: 1px;
    background: white;
    box-shadow: 2vw 5vh 1px white, 10vw 8vh 1px white, 15vw 15vh 0px white, 22vw 22vh 1px white, 28vw 12vh 1px white, 32vw 32vh 0px white, 38vw 18vh 1px white, 42vw 35vh 1px white, 48vw 25vh 1px white, 53vw 42vh 0px white, 58vw 15vh 1px white, 63vw 38vh 1px white, 68vw 28vh 1px white, 73vw 45vh 0px white, 78vw 32vh 1px white, 83vw 48vh 1px white, 88vw 20vh 1px white, 93vw 52vh 0px white, 98vw 35vh 1px white, 5vw 60vh 1px white, 12vw 65vh 1px white, 18vw 72vh 0px white, 25vw 78vh 1px white, 30vw 85vh 1px white, 35vw 68vh 0px white, 40vw 82vh 1px white, 45vw 92vh 1px white, 50vw 75vh 0px white, 55vw 88vh 1px white, 60vw 95vh 1px white, 65vw 72vh 0px white, 70vw 85vh 1px white, 75vw 78vh 1px white, 80vw 92vh 0px white, 85vw 82vh 1px white, 90vw 88vh 1px white, 95vw 75vh 0px white;
    animation: twinkle 12s infinite linear;
    z-index: 2;
}

/* MEJORA: Luna circular completa y centrada */
.moon {
    position: absolute;
    top: 50%;
    left: 50%;
    width: min(90vw, 90vh);
    height: min(90vw, 90vh);
    background-color: #f0f0f0;
    border-radius: 50%;
    box-shadow: 0 0 60px 10px #ffffff, 0 0 100px 20px rgba(255, 255, 255, 0.7), inset -40px -20px 80px rgba(0, 0, 0, 0.2);
    transform: translate(-50%, -50%); /* Centrado perfecto */
    transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.8s ease-out;
    z-index: 3;
}

#crow-container {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; transition: opacity 1.5s ease-out; z-index: 4;
}

#crow-image {
    width: clamp(180px, 20vw, 280px); color: #000;
    transform: translateY(40px) scale(0.9);
    transition: transform 1.5s cubic-bezier(0.23, 1, 0.32, 1);
}

/* --- CONTENIDO QUE SE DESPLAZA --- */
#hero {
    height: 100vh; 
    display: flex; 
    justify-content: center; 
    align-items: center;
    position: relative; 
    z-index: 5;
}
#main-title {
    font-size: clamp(3rem, 10vw, 8rem); 
    color: #FFFFFF; 
    font-weight: 700;
    text-shadow: 0 0 15px rgba(0, 0, 0, 0.8), 0 0 25px rgba(0, 0, 0, 0.6);
    transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.8s ease;
}

/* SOLUCIÓN: Transición de la luna a la sección de herramientas */
#tools-section {
    min-height: 100vh; 
    padding: 150px 40px 100px;
    position: relative; 
    z-index: 5; 
    text-align: center;
    background: transparent; /* SIN FONDO SÓLIDO */
}
#tools-section::before {
    content: ''; 
    position: absolute; 
    top: 0; 
    left: 0;
    width: 100%; 
    height: 100%;
    /* Gradiente que oscurece la luna progresivamente */
    background: linear-gradient(to bottom, 
        rgba(25, 24, 59, 0) 0%, 
        rgba(25, 24, 59, 0.9) 40%, 
        var(--color-background-end) 70%
    );
    z-index: -1;
}

#tools-section h2 {
    font-size: 3.5rem; 
    margin-bottom: 3rem;
    color: var(--color-text-primary);
    text-shadow: 0 0 10px rgba(161, 194, 189, 0.5);
}

.tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
    max-width: 1000px;
    margin: 0 auto;
}
.tool-card {
    background-color: rgba(42, 41, 88, 0.5);
    border: 1px solid rgba(161, 194, 189, 0.3);
    padding: 2.5rem 2rem;
    border-radius: 16px;
    backdrop-filter: blur(5px);
    transition: transform 0.3s ease, border-color 0.3s ease;
    cursor: pointer;
    text-align: center;
}
.tool-card:hover {
    transform: translateY(-8px);
    border-color: var(--color-primary);
}
.tool-card h3 {
    font-size: 1.5rem;
    font-weight: 400; /* Menos negrita, como en la imagen */
    color: var(--color-text-secondary);
}



/* chatbot  */
#chatbot-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
}

#chatbot-toggle-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    /* ESTE ES EL CAMBIO: de color sólido a gradiente */
    background: linear-gradient(135deg, #5A88FF 0%, #AA78FF 100%);
    border: none;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 5px 15px rgba(90, 136, 255, 0.3);
    transition: transform 0.3s ease, background-color 0.3s ease;
}
#chatbot-toggle-btn:hover {
    transform: scale(1.1);
}
#chatbot-toggle-btn svg {
    width: 30px;
    height: 30px;
    /* ESTE ES EL CAMBIO: El icono ahora es blanco para contrastar */
    fill: #FFFFFF;
    transition: transform 0.3s ease, opacity 0.3s ease;
    position: absolute;
}
#chatbot-toggle-btn .icon-close {
    opacity: 0;
    transform: rotate(-90deg) scale(0.5);
}
#chatbot-toggle-btn.active .icon-open {
    opacity: 0;
    transform: rotate(90deg) scale(0.5);
}
#chatbot-toggle-btn.active .icon-close {
    opacity: 1;
    transform: rotate(0) scale(1);
}


#chat-widget {
    position: absolute;
    bottom: 80px; /* (60px del botón + 20px de margen) */
    right: 0;
    width: 350px;
    height: 500px;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-main);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none; /* No se puede interactuar cuando está oculto */
}
#chat-widget.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto; /* Se puede interactuar cuando es visible */
}

.chat-header {
    padding: 15px 20px;
    background-color: rgba(0,0,0,0.1);
    border-bottom: 1px solid var(--color-border);
    flex-shrink: 0;
}
.chat-header h3 { margin: 0; font-size: 1.1em; }
.chat-header p { margin: 2px 0 0; font-size: 0.8em; color: var(--color-text-secondary); }

.chat-messages {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
}
.message {
    max-width: 85%;
    padding: 10px 15px;
    border-radius: 12px;
    margin-bottom: 10px;
    line-height: 1.4;
    word-wrap: break-word;
}
.system-message {
    background-color: rgba(161, 194, 189, 0.1);
    color: var(--color-text-secondary);
    align-self: flex-start;
    border-top-left-radius: 0;
}
.user-message {
    background-color: var(--color-primary);
    color: var(--color-button-hover-text);
    align-self: flex-end;
    margin-left: auto; /* Alinea a la derecha */
    border-top-right-radius: 0;
}

.chat-input-area {
    display: flex;
    padding: 15px;
    border-top: 1px solid var(--color-border);
    flex-shrink: 0;
    gap: 10px;
}
#chat-input {
    flex-grow: 1;
    padding: 10px;
    border-radius: var(--border-radius-small);
    border: 1px solid var(--color-border);
    background-color: var(--color-background);
    color: var(--color-text-primary);
    font-family: var(--font-family);
    font-size: 1em;
}
#chat-input:focus {
    outline: none;
    border-color: var(--color-primary);
}
#chat-send-btn {
    width: 40px;
    height: 40px;
    border: none;
    background-color: var(--color-primary);
    color: var(--color-button-hover-text);
    border-radius: var(--border-radius-small);
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
}
#chat-send-btn svg {
    width: 20px;
    height: 20px;
    fill: var(--color-button-hover-text);
}
#chat-send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
#chat-options-container {
    flex-direction: column;
    align-items: stretch;
    padding: 15px;
    gap: 10px;
    background-color: var(--color-background); /* Fondo consistente */
}

.option-btn {
    padding: 12px 15px;
    border: 1px solid var(--color-border);
    background-color: var(--color-surface);
    color: var(--color-text-secondary);
    border-radius: var(--border-radius-small);
    cursor: pointer;
    text-align: left;
    transition: background-color 0.2s, color 0.2s;
    font-family: var(--font-family);
    font-size: 0.9em;
    width: 100%;
}

.option-btn:hover {
    background-color: rgba(161, 194, 189, 0.1);
    color: var(--color-text-primary);
    border-color: var(--color-primary);
}

.option-btn.back-btn {
    margin-top: 10px;
    text-align: center;
    color: var(--color-primary);
    font-weight: bold;
}